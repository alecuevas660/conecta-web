document.addEventListener("DOMContentLoaded",()=>{function s(t,o){const n=document.getElementById("custom-notification");n.textContent=t,n.className=`custom-notification show ${o}`,setTimeout(()=>{n.classList.remove("show")},3e3)}const d={root:null,rootMargin:"0px",threshold:.1},a=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&(o.target.classList.add("visible"),a.unobserve(o.target))})},d);document.querySelectorAll(".fade-in-up").forEach(t=>a.observe(t));const e=document.querySelector(".needs-validation"),r=document.getElementById("submit-button"),c=document.getElementById("button-text"),i=document.getElementById("button-loader");e.addEventListener("submit",async t=>{if(t.preventDefault(),!e.checkValidity()){t.stopPropagation(),e.classList.add("was-validated");return}r.disabled=!0,c.classList.add("d-none"),i.classList.remove("d-none");const o={name:e.querySelector("#nombre").value,email:e.querySelector("#email").value,telefono:e.querySelector("#telefono").value,mensaje:e.querySelector("#mensaje").value};try{const l=await(await fetch("https://conectainternacional.cl/api/contacto/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),credentials:"include"})).json();l.success?(s("Mensaje enviado correctamente.","success"),e.reset(),e.classList.remove("was-validated")):s("Error: "+l.error,"error")}catch(n){console.error(n),s("Ocurri√≥ un error al enviar el mensaje.","error")}finally{r.disabled=!1,c.classList.remove("d-none"),i.classList.add("d-none")}})});
